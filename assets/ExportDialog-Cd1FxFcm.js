import{r as e,j as s}from"./react-vendor-C1GrfEZv.js";import{D as a,c as t,d as l,e as i,O as r,L as n,P as c,x as o,B as x,Q as d,y as h,U as m}from"./ui-vendor-CjcnmcMN.js";import"./map-vendor-CHlrju8F.js";const p=Array.from({length:50},(e,s)=>.1*(s+1));function b({open:b,onOpenChange:j,defaultLocation:w,onExport:g,previewGenerator:u}){const[v,N]=e.useState(w),[f,y]=e.useState(9),[k,C]=e.useState(9),[S,F]=e.useState(""),[P,E]=e.useState(!1);e.useEffect(()=>{N(w)},[w]),e.useEffect(()=>{if(b&&u){const e=u(v||w,p[f],p[k]);F(e)}},[b,v,f,k,w,u]);const L=e=>{g(v.trim()||w,e,p[f],p[k]),j(!1)};return s.jsxs(s.Fragment,{children:[s.jsx("style",{children:"\n  .export-preview-container svg {\n    width: 100% !important;\n    height: 100% !important;\n    object-fit: contain;\n  }\n"}),s.jsx(a,{open:b,onOpenChange:j,children:s.jsxs(t,{className:"sm:max-w-[600px] bg-black/30 backdrop-blur-xl border border-white/20 shadow-2xl text-white",children:[s.jsxs(l,{className:"border-b border-white/20 bg-white/5 -mx-6 -mt-6 px-6 py-4 mb-4",children:[s.jsx(i,{className:"font-orbitron text-white",children:"Export Sky Map"}),s.jsx(r,{className:"text-gray-400",children:"Preview, customize location details and choose export format"})]}),s.jsx("div",{className:"space-y-4",children:S&&s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsxs("div",{className:"space-y-1 flex-shrink-0",children:[s.jsx(n,{className:"text-white text-xs",children:"Preview"}),s.jsx("div",{className:"export-preview-container border border-white/20 rounded-md overflow-hidden bg-white cursor-pointer hover:border-white/40 transition-colors",onClick:()=>E(!0),title:"Click to expand",style:{width:"min(139px, 30vh)",aspectRatio:"210 / 297"},children:s.jsx("div",{className:"w-full h-full",dangerouslySetInnerHTML:{__html:S}})}),s.jsx("p",{className:"text-xs text-gray-400",children:"Click to expand"})]}),s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{className:"grid gap-2",children:[s.jsx(n,{htmlFor:"location",className:"text-white",children:"Location"}),s.jsx(c,{id:"location",placeholder:"Enter location name or address\n(can be multiple lines)",value:v,onChange:e=>N(e.target.value),className:"min-h-[100px] bg-black/40 border-white/20 text-white placeholder:text-gray-500 focus-visible:ring-white/30"})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(n,{className:"text-white",children:"Map Font Size"}),s.jsxs("span",{className:"text-sm text-gray-400",children:[p[f].toFixed(1),"x"]})]}),s.jsx(o,{value:[f],onValueChange:e=>y(e[0]),min:0,max:p.length-1,step:1,className:"w-full"}),s.jsxs("div",{className:"relative text-xs text-gray-500",children:[s.jsx("span",{className:"absolute left-0",children:"0.1x"}),s.jsx("span",{className:"absolute",style:{left:"18.37%"},children:"1x"}),s.jsx("span",{className:"absolute right-0",children:"5x"})]})]}),s.jsxs("div",{className:"grid gap-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(n,{className:"text-white",children:"Panel Font Size"}),s.jsxs("span",{className:"text-sm text-gray-400",children:[p[k].toFixed(1),"x"]})]}),s.jsx(o,{value:[k],onValueChange:e=>C(e[0]),min:0,max:p.length-1,step:1,className:"w-full"}),s.jsxs("div",{className:"relative text-xs text-gray-500",children:[s.jsx("span",{className:"absolute left-0",children:"0.1x"}),s.jsx("span",{className:"absolute",style:{left:"18.37%"},children:"1x"}),s.jsx("span",{className:"absolute right-0",children:"5x"})]})]}),s.jsx("div",{className:"grid gap-3",children:s.jsxs("div",{className:"flex gap-4",children:[s.jsxs(x,{type:"button",className:"flex-1 bg-blue-600 hover:bg-blue-700",onClick:()=>L("svg"),children:[s.jsx(d,{className:"mr-2 h-4 w-4"}),"SVG"]}),s.jsxs(x,{type:"button",className:"flex-1 bg-blue-600 hover:bg-blue-700",onClick:()=>L("pdf"),children:[s.jsx(h,{className:"mr-2 h-4 w-4"}),"PDF"]})]})})]})]})}),s.jsxs(m,{className:"border-t border-white/20 pt-4 -mx-6 -mb-6 px-6 pb-4 bg-white/5",children:[s.jsx(x,{variant:"outline",onClick:()=>{N(""),y(9),C(9)},className:"border-white/20 text-white hover:bg-white/10",children:"Reset"}),s.jsx(x,{variant:"outline",onClick:()=>j(!1),className:"border-white/20 text-white hover:bg-white/10",children:"Cancel"})]})]})}),s.jsx(a,{open:P,onOpenChange:E,children:s.jsxs(t,{className:"bg-black/30 backdrop-blur-xl border border-white/20 shadow-2xl p-6 overflow-hidden",style:{width:"min(70vw, calc(90vh * 210 / 297))",maxWidth:"1200px"},children:[s.jsx(l,{className:"border-b border-white/20 bg-white/5 -mx-6 -mt-6 px-6 py-3 mb-4",children:s.jsx(i,{className:"font-orbitron text-white text-sm",children:"Preview - Full Size"})}),s.jsx("div",{className:"export-preview-container bg-white",style:{aspectRatio:"210 / 297",width:"100%",padding:0},children:s.jsx("div",{className:"w-full h-full",dangerouslySetInnerHTML:{__html:S}})})]})})]})}export{b as ExportDialog};
