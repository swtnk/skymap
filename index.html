<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Celestial Sky Map - Interactive 3D Planetarium</title>
    <meta name="description" content="Explore the night sky with an interactive 3D celestial map. View constellations, stars, and planets with accurate astronomical positions." />
    <meta name="author" content="Celestial Sky Map" />

    <meta property="og:title" content="Celestial Sky Map - Interactive 3D Planetarium" />
    <meta property="og:description" content="Explore the night sky with an interactive 3D celestial map featuring constellations, stars, and planets." />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@Lovable" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <!-- Leaflet will be bundled locally (imported from node_modules) -->
    <style>
      #app-loader {
        position: fixed;
        inset: 0;
        background: #0a0e1a;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        transition: opacity 0.5s ease-out;
        overflow: hidden;
      }
      #app-loader.loaded {
        opacity: 0;
        pointer-events: none;
      }
      
      /* Starfield background */
      .starfield {
        position: absolute;
        width: 100%;
        height: 100%;
        animation: rotateStarfield 120s linear infinite;
      }
      
      @keyframes rotateStarfield {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      
      .star-layer {
        position: absolute;
        width: 200%;
        height: 200%;
        top: -50%;
        left: -50%;
      }
      
      .star {
        position: absolute;
        background: white;
        border-radius: 50%;
        animation: twinkle 4s ease-in-out infinite;
      }
      
      @keyframes twinkle {
        0%, 100% { opacity: 0.3; transform: scale(1); }
        50% { opacity: 1; transform: scale(1.2); }
      }
      
      /* Cosmic dust */
      .cosmic-dust {
        position: absolute;
        width: 100%;
        height: 100%;
        pointer-events: none;
      }
      
      .dust-particle {
        position: absolute;
        width: 2px;
        height: 2px;
        background: rgba(96, 165, 250, 0.4);
        border-radius: 50%;
        animation: float 30s infinite ease-in-out;
      }
      
      @keyframes float {
        0%, 100% {
          transform: translate(0, 0);
          opacity: 0;
        }
        10% {
          opacity: 1;
        }
        90% {
          opacity: 1;
        }
        100% {
          transform: translate(var(--tx), var(--ty));
          opacity: 0;
        }
      }
      
      /* Galaxy container */
      .galaxy-container {
        position: relative;
        width: 500px;
        height: 500px;
        margin-bottom: 60px;
        animation: galaxyRotate 60s linear infinite;
      }
      
      @keyframes galaxyRotate {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
      
      /* Central core with depth */
      .core {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 120px;
        height: 120px;
        transform: translate(-50%, -50%);
        background: radial-gradient(circle, 
          rgba(255, 255, 255, 0.9) 0%,
          rgba(147, 197, 253, 0.8) 20%,
          rgba(96, 165, 250, 0.6) 40%,
          rgba(59, 130, 246, 0.3) 60%,
          transparent 100%);
        border-radius: 50%;
        animation: coreBreath 6s ease-in-out infinite;
      }
      
      @keyframes coreBreath {
        0%, 100% {
          transform: translate(-50%, -50%) scale(1);
          box-shadow: 
            0 0 40px rgba(96, 165, 250, 0.6),
            0 0 80px rgba(59, 130, 246, 0.4),
            0 0 120px rgba(37, 99, 235, 0.2),
            inset 0 0 40px rgba(255, 255, 255, 0.2);
        }
        50% {
          transform: translate(-50%, -50%) scale(1.1);
          box-shadow: 
            0 0 60px rgba(96, 165, 250, 0.8),
            0 0 120px rgba(59, 130, 246, 0.6),
            0 0 180px rgba(37, 99, 235, 0.4),
            inset 0 0 60px rgba(255, 255, 255, 0.3);
        }
      }
      
      /* Inner glow ring */
      .inner-ring {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 100px;
        height: 100px;
        transform: translate(-50%, -50%);
        border: 2px solid rgba(255, 255, 255, 0.6);
        border-radius: 50%;
        animation: innerSpin 20s linear infinite;
        box-shadow: 
          inset 0 0 20px rgba(96, 165, 250, 0.4),
          0 0 20px rgba(96, 165, 250, 0.3);
      }
      
      @keyframes innerSpin {
        from { transform: translate(-50%, -50%) rotate(0deg); }
        to { transform: translate(-50%, -50%) rotate(360deg); }
      }
      
      /* Pulsing rings - slower */
      .pulse-ring {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        border: 2px solid rgba(96, 165, 250, 0.5);
        border-radius: 50%;
        animation: pulse 4s ease-out infinite;
      }
      
      @keyframes pulse {
        0% {
          width: 120px;
          height: 120px;
          opacity: 0.8;
        }
        100% {
          width: 500px;
          height: 500px;
          opacity: 0;
        }
      }
      
      .pulse-ring:nth-child(2) { animation-delay: 0.8s; }
      .pulse-ring:nth-child(3) { animation-delay: 1.6s; }
      .pulse-ring:nth-child(4) { animation-delay: 2.4s; }
      .pulse-ring:nth-child(5) { animation-delay: 3.2s; }
      
      /* Orbital particles - slower and more elegant */
      .orbit-ring {
        position: absolute;
        top: 50%;
        left: 50%;
        border-radius: 50%;
        transform: translate(-50%, -50%);
      }
      
      .orbit-particle {
        position: absolute;
        width: 6px;
        height: 6px;
        border-radius: 50%;
        top: 50%;
        left: 50%;
        animation: orbit 12s ease-in-out infinite;
      }
      
      @keyframes orbit {
        0% {
          transform: rotate(0deg) translateX(var(--radius)) scale(1);
          opacity: 0.6;
        }
        25% {
          opacity: 1;
        }
        50% {
          transform: rotate(180deg) translateX(var(--radius)) scale(0.7);
          opacity: 0.8;
        }
        75% {
          opacity: 1;
        }
        100% {
          transform: rotate(360deg) translateX(var(--radius)) scale(1);
          opacity: 0.6;
        }
      }
      
      /* Progress section */
      .progress-section {
        width: 420px;
        max-width: 90vw;
      }
      
      .loader-text {
        font-family: 'Orbitron', sans-serif;
        font-size: 32px;
        font-weight: 700;
        text-align: center;
        margin-bottom: 30px;
        letter-spacing: 10px;
        color: #fff;
        text-shadow: 
          0 0 10px rgba(96, 165, 250, 0.8),
          0 0 20px rgba(59, 130, 246, 0.6),
          0 0 30px rgba(37, 99, 235, 0.4);
        animation: textGlow 4s ease-in-out infinite;
      }
      
      @keyframes textGlow {
        0%, 100% {
          opacity: 0.8;
          transform: scale(1);
          text-shadow: 
            0 0 10px rgba(96, 165, 250, 0.8),
            0 0 20px rgba(59, 130, 246, 0.6);
        }
        50% {
          opacity: 1;
          transform: scale(1.02);
          text-shadow: 
            0 0 20px rgba(96, 165, 250, 1),
            0 0 40px rgba(59, 130, 246, 0.8),
            0 0 60px rgba(37, 99, 235, 0.6);
        }
      }
      
      /* Progress bar container */
      .progress-wrapper {
        position: relative;
        margin-bottom: 16px;
      }
      
      .progress-container {
        position: relative;
        width: 100%;
        height: 8px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 4px;
        overflow: visible;
        box-shadow: 
          inset 0 2px 4px rgba(0, 0, 0, 0.5),
          0 0 20px rgba(0, 0, 0, 0.3);
      }
      
      .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, 
          #3b82f6 0%, 
          #60a5fa 50%, 
          #93c5fd 100%);
        border-radius: 4px;
        transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 
          0 0 25px rgba(96, 165, 250, 0.6),
          0 4px 15px rgba(59, 130, 246, 0.4),
          inset 0 1px 0 rgba(255, 255, 255, 0.3);
        position: relative;
        overflow: hidden;
      }
      
      .progress-bar::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 60%;
        background: linear-gradient(180deg, 
          rgba(255, 255, 255, 0.4), 
          transparent);
        border-radius: 4px 4px 0 0;
      }
      
      .progress-bar::after {
        content: '';
        position: absolute;
        top: -4px;
        right: -4px;
        width: 16px;
        height: 16px;
        background: radial-gradient(circle, #fff 30%, #60a5fa 70%);
        border-radius: 50%;
        box-shadow: 
          0 0 20px rgba(96, 165, 250, 1),
          0 0 40px rgba(59, 130, 246, 0.8),
          0 2px 8px rgba(0, 0, 0, 0.3);
        animation: glowPulse 2s ease-in-out infinite;
      }
      
      @keyframes glowPulse {
        0%, 100% {
          transform: scale(1);
          opacity: 1;
        }
        50% {
          transform: scale(1.3);
          opacity: 0.9;
        }
      }
      
      .progress-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 12px;
      }
      
      .progress-status {
        font-family: 'Space Mono', monospace;
        font-size: 13px;
        color: rgba(255, 255, 255, 0.6);
        letter-spacing: 1px;
      }
      
      .progress-percent {
        font-family: 'Orbitron', sans-serif;
        font-size: 20px;
        font-weight: 700;
        color: #60a5fa;
        text-shadow: 
          0 0 10px rgba(96, 165, 250, 0.8),
          0 0 20px rgba(96, 165, 250, 0.4);
      }
    </style>
    <script type="module" crossorigin src="./assets/index-BplOvGOf.js"></script>
    <link rel="modulepreload" crossorigin href="./assets/map-vendor-scx2wcTa.js">
    <link rel="modulepreload" crossorigin href="./assets/react-vendor-OEMN43JN.js">
    <link rel="modulepreload" crossorigin href="./assets/ui-vendor-uHWh54n4.js">
    <link rel="modulepreload" crossorigin href="./assets/routing-vendor-BoMlvbZZ.js">
    <link rel="modulepreload" crossorigin href="./assets/three-vendor-C4xQyQ5C.js">
    <link rel="modulepreload" crossorigin href="./assets/pdf-vendor-Do3zHwVP.js">
    <link rel="stylesheet" crossorigin href="./assets/map-vendor-Dgihpmma.css">
    <link rel="stylesheet" crossorigin href="./assets/index-Cj3OKIwi.css">
  </head>

  <body>
    <div id="app-loader">
      <!-- Rotating starfield background -->
      <div class="starfield">
        <div class="star-layer" id="stars"></div>
      </div>
      
      <!-- Cosmic dust particles -->
      <div class="cosmic-dust" id="cosmic-dust"></div>
      
      <!-- Galaxy visualization -->
      <div class="galaxy-container">
        <!-- Central glowing core -->
        <div class="core"></div>
        <div class="inner-ring"></div>
        
        <!-- Pulsing rings -->
        <div class="pulse-ring"></div>
        <div class="pulse-ring"></div>
        <div class="pulse-ring"></div>
        <div class="pulse-ring"></div>
        <div class="pulse-ring"></div>
        
        <!-- Orbital particles rings -->
        <div class="orbit-ring" id="orbit-1"></div>
        <div class="orbit-ring" id="orbit-2"></div>
        <div class="orbit-ring" id="orbit-3"></div>
      </div>
      
      <!-- Progress section -->
      <div class="progress-section">
        <div class="loader-text">CELESTIAL SPHERE</div>
        
        <div class="progress-wrapper">
          <div class="progress-container">
            <div class="progress-bar" id="progress-bar" style="width: 0%"></div>
          </div>
          <div class="progress-info">
            <span class="progress-status" id="progress-status">Initializing...</span>
            <span class="progress-percent" id="progress-percent">0%</span>
          </div>
        </div>
      </div>
    </div>
    
    <div id="root"></div>
    
    <script>
      // Create starfield
      const starsContainer = document.getElementById('stars');
      for (let i = 0; i < 150; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        const size = Math.random() * 2 + 0.5;
        star.style.width = size + 'px';
        star.style.height = size + 'px';
        star.style.left = Math.random() * 100 + '%';
        star.style.top = Math.random() * 100 + '%';
        star.style.animationDelay = Math.random() * 4 + 's';
        star.style.animationDuration = (3 + Math.random() * 3) + 's';
        starsContainer.appendChild(star);
      }
      
      // Create cosmic dust
      const cosmicDust = document.getElementById('cosmic-dust');
      for (let i = 0; i < 30; i++) {
        const dust = document.createElement('div');
        dust.className = 'dust-particle';
        const startX = Math.random() * 100;
        const startY = Math.random() * 100;
        const endX = (Math.random() - 0.5) * 80;
        const endY = (Math.random() - 0.5) * 80;
        dust.style.left = startX + '%';
        dust.style.top = startY + '%';
        dust.style.setProperty('--tx', endX + 'vw');
        dust.style.setProperty('--ty', endY + 'vh');
        dust.style.animationDelay = Math.random() * 30 + 's';
        dust.style.animationDuration = (25 + Math.random() * 15) + 's';
        cosmicDust.appendChild(dust);
      }
      
      // Create orbital particles with varied colors
      const colors = [
        { main: '#60a5fa', shadow: 'rgba(96, 165, 250, 0.8)' },
        { main: '#93c5fd', shadow: 'rgba(147, 197, 253, 0.8)' },
        { main: '#3b82f6', shadow: 'rgba(59, 130, 246, 0.8)' },
        { main: '#2563eb', shadow: 'rgba(37, 99, 235, 0.8)' },
        { main: '#a5b4fc', shadow: 'rgba(165, 180, 252, 0.8)' },
      ];
      
      const orbits = [
        { id: 'orbit-1', radius: 110, count: 6, duration: 18 },
        { id: 'orbit-2', radius: 160, count: 10, duration: 24 },
        { id: 'orbit-3', radius: 210, count: 14, duration: 30 }
      ];
      
      orbits.forEach(orbit => {
        const orbitEl = document.getElementById(orbit.id);
        for (let i = 0; i < orbit.count; i++) {
          const particle = document.createElement('div');
          particle.className = 'orbit-particle';
          const color = colors[i % colors.length];
          particle.style.background = color.main;
          particle.style.boxShadow = `0 0 15px ${color.shadow}`;
          particle.style.setProperty('--radius', orbit.radius + 'px');
          particle.style.animationDuration = orbit.duration + 's';
          particle.style.animationDelay = -(i / orbit.count) * orbit.duration + 's';
          orbitEl.appendChild(particle);
        }
      });
      
      // Progress tracking with smooth transitions
      let progress = 0;
      const progressBar = document.getElementById('progress-bar');
      const progressPercent = document.getElementById('progress-percent');
      const progressStatus = document.getElementById('progress-status');
      
      const statusMessages = [
        { threshold: 0, text: 'Initializing...' },
        { threshold: 15, text: 'Loading stellar database...' },
        { threshold: 30, text: 'Calculating orbital mechanics...' },
        { threshold: 50, text: 'Rendering celestial bodies...' },
        { threshold: 70, text: 'Mapping constellations...' },
        { threshold: 85, text: 'Finalizing...' },
        { threshold: 95, text: 'Almost ready...' }
      ];
      
      function updateProgress(value) {
        progress = Math.min(value, 100);
        progressBar.style.width = progress + '%';
        progressPercent.textContent = Math.round(progress) + '%';
        
        // Update status message based on progress
        for (let i = statusMessages.length - 1; i >= 0; i--) {
          if (progress >= statusMessages[i].threshold) {
            progressStatus.textContent = statusMessages[i].text;
            break;
          }
        }
      }
      
      // Smoother loading simulation
      const startTime = Date.now();
      const progressInterval = setInterval(() => {
        const elapsed = Date.now() - startTime;
        // Ease-out curve for more natural progress
        const estimatedProgress = Math.min((elapsed / 2500) * 75, 75);
        updateProgress(estimatedProgress);
      }, 60);
      
      // Track actual resource loading
      window.addEventListener('load', () => {
        clearInterval(progressInterval);
        updateProgress(100);
        progressStatus.textContent = 'Ready!';
      });
      
      document.addEventListener('DOMContentLoaded', () => {
        updateProgress(Math.max(progress, 85));
      });
      
      // Performance observer for accurate tracking
      if ('PerformanceObserver' in window) {
        try {
          let resourcesLoaded = 0;
          let totalResources = 0;
          const observer = new PerformanceObserver((list) => {
            const entries = list.getEntries();
            totalResources += entries.length;
            resourcesLoaded += entries.filter(e => e.responseEnd > 0).length;
            if (totalResources > 0) {
              const resourceProgress = (resourcesLoaded / totalResources) * 95;
              updateProgress(Math.max(progress, resourceProgress));
            }
          });
          observer.observe({ entryTypes: ['resource'] });
        } catch (e) {
          console.error('Performance observer failed:', e);
        }
      }
    </script>
    
  </body>
</html>
